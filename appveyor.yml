version: 0.2.2.{build}

platform: x86

# branches:
#   only:
#     - master

clone_folder: c:\gopath\src\github.com\sonm-io\core

environment:
  GOPATH: c:\gopath

install:
  - set PATH=%GOPATH%\bin;c:\go\bin;%PATH%
  - set GOOS=windows
  - set GOARCH=386
  - go version
  - go env

build_script:
  - c:\MinGW\bin\mingw32-make.exe build_cli_win32

artifacts:
  - path: sonmcli_win32.exe
    name: binary

# deploy:
#   release: myapp-$(appveyor_build_version)
#   description: 'This is a release of my awesome application.'
#   provider: GitHub
#   auth_token:
#     secure: FW3tJ3fMncxvs58/ifSP7w+kBl9BlxvRMr9liHmnBs14ALRG8Vfyol+sNhj9u2JA
#   artifact: binary # This is the name we specified in the artifacts section.
#   draft: false
#   prerelease: false
#   on:
#     branch: master
