version: 0.2.2.{build}

platform: x86

# branches:
#   only:
#     - master

clone_folder: c:\gopath\src\github.com\sonm-io\core

environment:
  GOPATH: c:\gopath

install:
  - echo %PATH%
  - echo %GOPATH%
  - set PATH=%GOPATH%\bin;c:\go\bin;%PATH%
  - go version
  - go env
  - dir c:\MinGW\bin

build_script:
  - GOOS=windows GOARCH=386 go build -tags nocgo -ldflags "-s -X github.com/sonm-io/core/cmd/cli/commands.version=0.2.2.{build}.win32" -o conmcli_win32.exe ./cmd/cli
  # - make build_cli_win32

artifacts:
  - path: sonmcli_win32.exe
    name: binary

# deploy:
#   release: myapp-$(appveyor_build_version)
#   description: 'This is a release of my awesome application.'
#   provider: GitHub
#   auth_token:
#     secure: FW3tJ3fMncxvs58/ifSP7w+kBl9BlxvRMr9liHmnBs14ALRG8Vfyol+sNhj9u2JA
#   artifact: binary # This is the name we specified in the artifacts section.
#   draft: false
#   prerelease: false
#   on:
#     branch: master
